<div class="message-list">
  @if (loading()) {
  <div class="state-container">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading messages...</p>
  </div>
  } @else if (error()) {
  <mat-card class="error-card">
    <mat-card-content>
      <div class="error-content">
        <mat-icon color="warn">error</mat-icon>
        <p>{{ error() }}</p>
      </div>
    </mat-card-content>
  </mat-card>
  } @else if (!hasMessages()) {
  <mat-card class="empty-card">
    <mat-card-content>
      <mat-icon>inbox</mat-icon>
      <p>No messages yet. Send your first message!</p>
    </mat-card-content>
  </mat-card>
  } @else {
  <div class="messages-header">
    <h2>Your Messages</h2>
    <span class="badge">{{ messages().length }}</span>
  </div>
  <div class="messages-grid">
    @for (message of messages(); track message.id) {
    <mat-card class="message-card" appearance="outlined">
      <mat-card-content>
        <div class="message-header">
          <div class="phone-info">
            <mat-icon>phone</mat-icon>
            <span class="phone-number">{{ message.phone_number }}</span>
          </div>
          <span class="timestamp">{{ formatDate(message.created_at) }}</span>
        </div>
        <p class="message-content">{{ message.content }}</p>
      </mat-card-content>
    </mat-card>
    }
  </div>
  }
</div>
